<!DOCTYPE html>
<html>

<head>
	<title>Monsters!</title>

	<style type="text/css">
		body {
			margin: 1em auto;
			max-width: 40em;
			width: 88%;
		}

		/**
		 * A simple grid layout
		 */
		.row {
			display: grid;
			grid-template-columns: auto auto auto;
			text-align: center;
		}

		.grid {
			min-height: 6em;
			padding: 1em;
		}

		/**
		 * Make sure images scale
		 */
		img {
			height: auto;
			max-width: 100%;
		}
	</style>
</head>

<body>

	<h1>Monsters!</h1>

	<div id="app"></div>
	<noscript>
		<p>Please enable JavaScript in your browser to play this game.</p>
	</noscript>

	<footer>
		<hr>
		<p class="text-small text-muted">Icons by <a href="https://thenounproject.com/term/door/311732/">Jamie
				Dickinson</a>, <a href="https://thenounproject.com/term/monster/184225/">Nicky Knicky</a>, <a
				href="https://thenounproject.com/term/monster/1510400/">Alvaro Cabrera</a>, <a
				href="https://thenounproject.com/term/monster/28460/">Eliricon</a>, <a
				href="https://thenounproject.com/term/monster/82823/">April Yang</a>, <a
				href="https://thenounproject.com/term/monster/1062009/">tk66</a>, <a
				href="https://thenounproject.com/term/monster/24990/">Alex WaZa</a>, <a
				href="https://thenounproject.com/term/monster/37212/">Husein Aziz</a>, <a
				href="https://thenounproject.com/term/monster/2236082">iconcheese</a>, and <a
				href="https://thenounproject.com/term/socks/38451/">Yazmin Alanis</a>.</p>
	</footer>

	<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js"></script>
	<script>
		;(function () {
			let app = document.querySelector('#app');

			// The monsters and socks
			let monsters = [
				'monster1',
				'monster2',
				'monster3',
				'monster4',
				'monster5',
				'monster6',
				'monster7',
				'monster8',
				'monster9',
				'monster10',
				'monster11',
				'sock'
			];

			let shuffle = function (array) {
				let currentIndex = array.length;
				let temporaryValue, randomIndex;

				// While there remain elements to shuffle...
				while (0 !== currentIndex) {
					// Pick a remaining element...
					randomIndex = Math.floor(Math.random() * currentIndex);
					currentIndex -= 1;

					// And swap it with the current element.
					temporaryValue = array[currentIndex];
					array[currentIndex] = array[randomIndex];
					array[randomIndex] = temporaryValue;
				}
				return array;
			}

			// Shuffle the array of monsters
			shuffle(monsters);

			// Holds the html for door.svg (in each grid)
			let doorImgs = '<div class="row">' + monsters.map(function (monster) {

						return '<div class="grid" aria-live="polite">' +
									'<a data-image="' + monster +'" role="button" href="#"><img title="Click door to reveal the monster" alt="Picture of a door"' + 'src="img/door.svg"' + '/></a>' +
							   '</div>'
								}).join('') +

						   '</div>'


			// Reveals the monster behind the door
			let revealMonster = function (e) {
				let aTag = e.target.closest('[data-image]');
				if (aTag) {
					let monsterImg = aTag.getAttribute('data-image');
					aTag.innerHTML = '<img alt="Picture of a monster"' + 'src="img/' + monsterImg + '.svg"' + '/>';
				} else return; // Bail if clicked item is not an anchor tag
			}

			// Display door images in each div and inject into DOM
			app.innerHTML = '<p>Click or press Enter to reveal a monster behind the chosen door.</p>' +
							'<p><strong>Be careful not to click on a sock!</strong></p>' + doorImgs;

			window.addEventListener('click', revealMonster); // Reveals the monster on click event


		}(document))
	</script>
</body>

</html>